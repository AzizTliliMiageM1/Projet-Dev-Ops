<!doctype html>
<html lang="fr">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Gestion d‚Äôabonnements</title>

  <!-- Bootstrap & fonts -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

  <!-- App styles -->
  <link rel="stylesheet" href="/styles.css">

</head>

<body class="bg-light">

  <!-- Header -->
  <header class="app-hero shadow-sm">
    <div class="container d-flex align-items-center justify-content-between py-3">
      <div class="d-flex align-items-center gap-3">
        <div class="brand-badge"><i class="fa-solid fa-layer-group"></i></div>
        <div>
          <h1 class="app-title mb-0">Gestion d'abonnements</h1>
          <p class="app-subtitle mb-0">Pilotez vos services ‚Äî clair, rapide, color√© ‚ú®</p>
        </div>
      </div>
      <div class="d-flex gap-2">
        <button id="refreshBtn" class="btn btn-glass btn-sm"><i class="fa-solid fa-rotate me-1"></i> Rafra√Æchir</button>
        <a class="btn btn-outline-secondary btn-sm" href="/stats.html"><i class="fa-solid fa-chart-bar me-1"></i> Statistiques</a>
        <a class="btn btn-outline-secondary btn-sm" href="/help.html"><i class="fa-regular fa-circle-question me-1"></i> Aide</a>
        <a class="btn btn-white btn-sm" href="/home.html"><i class="fa-regular fa-window-restore me-1"></i> Accueil</a>
      </div>
    </div>
  </header>

  <main class="container py-4">
    <!-- Dashboard -->
    <section id="dashboard" class="row g-3 mb-4">
      <!-- Remplis par app.js ; style dans CSS -->
    </section>

    <!-- Flash messages -->
    <div id="flash" class="mb-3"></div>

    <div class="row">
      <!-- Liste -->
      <div class="col-lg-8">
        <div id="cards" class="row g-3">
          <!-- Cartes inject√©es par app.js -->
          <div class="empty-state" data-empty-hint>
            <div class="emoji">üóÇÔ∏è</div>
            <h6 class="mb-1">Aucun abonnement pour le moment</h6>
            <p class="text-muted mb-0">Ajoutez-en via le panneau √† droite, ou importez un JSON.</p>
          </div>
        </div>
      </div>

      <!-- Panneau secondaire -->
      <div class="col-lg-4">
        <!-- Ajouter -->
        <div class="panel card border-0 shadow-soft mb-3">
          <div class="panel-header">
            <div class="d-flex align-items-center gap-2">
              <span class="circle"><i class="fa-solid fa-plus"></i></span>
              <span class="fw-semibold">Ajouter un abonnement</span>
            </div>
          </div>
          <div class="panel-body">
            <form id="addForm" class="vstack gap-2">
              <div>
                <label class="form-label">Client</label>
                <input id="clientName" class="form-control form-control-sm" placeholder="Nom du client" required />
              </div>
              <div>
                <label class="form-label">Service</label>
                <input id="nomService" class="form-control form-control-sm" placeholder="Ex: Netflix, Orange‚Ä¶" required />
              </div>
              <div class="row g-2">
                <div class="col">
                  <label class="form-label">D√©but</label>
                  <input id="dateDebut" type="date" class="form-control form-control-sm" required />
                </div>
                <div class="col">
                  <label class="form-label">Fin</label>
                  <input id="dateFin" type="date" class="form-control form-control-sm" required />
                </div>
              </div>
              <div class="row g-2">
                <div class="col">
                  <label class="form-label">Cat√©gorie</label>
                  <input id="categorie" class="form-control form-control-sm" placeholder="Streaming, T√©l√©com‚Ä¶" />
                </div>
                <div class="col">
                  <label class="form-label">Prix mensuel (‚Ç¨)</label>
                  <input id="prixMensuel" type="number" min="0" step="0.01" class="form-control form-control-sm" />
                </div>
              </div>
              <div class="d-grid mt-2">
                <button type="submit" class="btn btn-primary btn-sm">
                  <i class="fa-solid fa-plus me-1"></i> Ajouter
                </button>
              </div>
            </form>
          </div>
        </div>

        <!-- Actions -->
        <div class="panel card border-0 shadow-soft">
          <div class="panel-header">
            <div class="d-flex align-items-center gap-2">
              <span class="circle soft"><i class="fa-solid fa-wand-magic-sparkles"></i></span>
              <span class="fw-semibold">Actions</span>
            </div>
          </div>
          <div class="panel-body">
            <div class="d-grid gap-2">
              <button id="exportBtn" class="btn btn-amber"><i class="fa-regular fa-file-code me-1"></i> Exporter
                JSON</button>
              <button id="bulkDeleteBtn" class="btn btn-danger"><i class="fa-regular fa-trash-can me-1"></i> Supprimer
                s√©lection</button>
              <label class="form-label small text-muted mt-2 mb-1">Importer JSON (tableau d'objets)</label>
              <input id="importFile" type="file" class="form-control" accept="application/json" />
              <div class="form-text">
                Chaque objet doit contenir : <code>clientName, nomService, dateDebut, dateFin</code>.
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Toolbar de recherche en bas comme dans le screenshot -->
    <section class="toolbar row g-2 align-items-center mb-3 mt-4">
      <div class="col-12 col-lg-5">
        <div class="input-group input-group-sm">
          <span class="input-group-text"><i class="fa-solid fa-magnifying-glass"></i></span>
          <input id="searchInput" class="form-control" placeholder="Rechercher client / service" />
        </div>
      </div>
      <div class="col-12 col-sm-4 col-lg-2">
        <select id="statusFilter" class="form-select form-select-sm">
          <option value="all">Tous</option>
          <option value="actifs">Actifs</option>
          <option value="expires">Expir√©s</option>
        </select>
      </div>
      <div class="col-12 col-sm-4 col-lg-3">
        <select id="sortSelect" class="form-select form-select-sm">
          <option value="dateDebut">Trier par date de d√©but</option>
          <option value="dateFin">Trier par date de fin</option>
          <option value="prix">Trier par prix</option>
          <option value="client">Trier par client</option>
        </select>
      </div>
      <div class="col-12 col-sm-4 col-lg-2 text-sm-end">
        <button id="alertsBtn" class="btn btn-outline-danger btn-sm w-100 w-sm-auto">
          <i class="fa-solid fa-bell me-1"></i> Alertes inactivit√©
        </button>
      </div>
    </section>



    <!-- Edit Modal -->
    <div class="modal fade" id="editModal" tabindex="-1">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Modifier un abonnement</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
          </div>
          <div class="modal-body">
            <form id="editForm" class="vstack gap-2">
              <input type="hidden" id="editIndex" />
              <div>
                <label class="form-label">Client</label>
                <input id="editClient" class="form-control form-control-sm" required />
              </div>
              <div>
                <label class="form-label">Service</label>
                <input id="editService" class="form-control form-control-sm" required />
              </div>
              <div class="row g-2">
                <div class="col">
                  <label class="form-label">D√©but</label>
                  <input id="editDebut" type="date" class="form-control form-control-sm" required />
                </div>
                <div class="col">
                  <label class="form-label">Fin</label>
                  <input id="editFin" type="date" class="form-control form-control-sm" required />
                </div>
              </div>
              <div class="row g-2">
                <div class="col">
                  <label class="form-label">Cat√©gorie</label>
                  <input id="editCategorie" class="form-control form-control-sm" />
                </div>
                <div class="col">
                  <label class="form-label">Prix mensuel (‚Ç¨)</label>
                  <input id="editPrix" type="number" min="0" step="0.01" class="form-control form-control-sm" />
                </div>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button class="btn btn-secondary btn-sm" data-bs-dismiss="modal">Annuler</button>
            <button id="saveEditBtn" class="btn btn-primary btn-sm">Enregistrer</button>
          </div>
        </div>
      </div>
    </div>

  </main>

  <!-- Bootstrap bundle -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <!-- App JS -->
  <script src="/app.js"></script>

</body>

</html>
