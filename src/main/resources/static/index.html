<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Gestion Abonnements — UI</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/static/styles.css">
</head>
<body class="bg-light">
  <nav class="navbar navbar-dark bg-primary mb-3">
    <div class="container-fluid">
      <span class="navbar-brand mb-0 h1">Gestion d'abonnements</span>
      <button id="refreshBtn" class="btn btn-outline-light">Rafraîchir</button>
    </div>
  </nav>

  <main class="container">
    <div class="row mb-3">
      <div class="col-12 d-flex justify-content-between align-items-center mb-3">
        <div>
          <h1 class="h3 mb-0">Mes Abonnements</h1>
          <p class="small-muted">Gérer vos services facilement — interface web moderne</p>
        </div>
        <div class="d-flex gap-2">
          <input id="searchInput" class="form-control form-control-sm" placeholder="Rechercher client ou service" style="min-width:220px">
          <button id="alertsBtn" class="btn btn-outline-danger btn-sm">Voir alertes</button>
        </div>
      </div>
      <div class="col-12">
        <div class="row g-3" id="dashboard">
          <!-- dashboard cards inserted by JS -->
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-md-8">
        <div id="cards" class="row g-3"></div>
      </div>
      <div class="col-md-4">
        <div class="card shadow-sm p-3 mb-3">
          <h5>Ajouter un abonnement</h5>
          <form id="addForm">
            <div class="mb-2">
              <input class="form-control" id="clientName" placeholder="Nom du client" required>
            </div>
            <div class="mb-2">
              <input class="form-control" id="nomService" placeholder="Service" required>
            </div>
            <div class="mb-2 row">
              <div class="col"><input class="form-control" id="dateDebut" type="date" required></div>
              <div class="col"><input class="form-control" id="dateFin" type="date" required></div>
            </div>
            <div class="mb-2">
              <input class="form-control" id="prixMensuel" placeholder="Prix mensuel" type="number" step="0.01" required>
            </div>
            <div class="mb-2">
              <input class="form-control" id="categorie" placeholder="Catégorie">
            </div>
            <button class="btn btn-primary w-100" type="submit">Ajouter</button>
          </form>
        </div>
        <div class="card shadow-sm p-3">
          <h6>Actions</h6>
          <button id="exportBtn" class="btn btn-warning w-100 mb-2">Exporter JSON</button>
          <input id="importFile" type="file" class="form-control" accept="application/json">
        </div>
      </div>
    </div>
  </main>

  <!-- Modal Edit -->
  <div class="modal fade" id="editModal" tabindex="-1">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Modifier l'abonnement</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <form id="editForm">
            <input type="hidden" id="editIndex">
            <div class="mb-2"><input id="editClient" class="form-control" placeholder="Nom du client"></div>
            <div class="mb-2"><input id="editService" class="form-control" placeholder="Service"></div>
            <div class="mb-2 row"><div class="col"><input id="editDebut" class="form-control" type="date"></div><div class="col"><input id="editFin" class="form-control" type="date"></div></div>
            <div class="mb-2"><input id="editPrix" class="form-control" type="number" step="0.01" placeholder="Prix"></div>
            <div class="mb-2"><input id="editCategorie" class="form-control" placeholder="Catégorie"></div>
          </form>
        </div>
        <div class="modal-footer">
          <button id="saveEditBtn" type="button" class="btn btn-primary">Enregistrer</button>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="/static/app.js"></script>
</body>
</html>
